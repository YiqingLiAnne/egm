# xEGM
# Yiqing Li, 10/20/2020
# Copyright: 2020 Yiqing Li (anne.yiqing.li@outlook.com)
# CC-BY-SA

Explorative Gradient Method.
Instructions to use the xEGM optimizer to optimize the control parameters.

## Getting Started

Unzip the tar.gz file.

### Prerequisites

MATLAB is needed.
Machine learning tool box for MATLAB is needed.
This version has been developped on MATLAB version R2018b.
Please contact anne.yiqing.li@outlook.com in case of error.

### Content

The main folder should contain the following folders and files:
- *README.md*
- *Initialization.m* is a script to initialize.
- *Restart.m* is a script to restart the optimization.
- *@EGM/*, *@Esample/*, *@Gsimplex/*, *@Mtable/* defines the objects in EGM algorithm.
- *Tools/* contains functions and files not used by the EGM class objects.
- *Plant/* contains the problems and parameters.
- *save_runs/* contains the saved EGM object and figures.

### Initialization and run

To start, run matlab in the main folder.
Then run Initialization.m to load the path.
-----------------------------------
Clear all
Initialization;
-----------------------------------


Create an EGM object to solve the toy problem.
Or specify a new problem to be solved, which should be defined in folder *Plant/*.
-----------------------------------
egm  = EGM('QIAObluff');
-----------------------------------

Set the name of folder in './save_runs' to save results.
-----------------------------------
egm.param.runName = 'run_01';
-----------------------------------

Start the iteration of optimization round by round.
Or run several rounds.
The first group of vertices in the sapce (a simplex including N+1 vertices with N variables) will evolve with the help of EGM which makes a balance of exploration and exploit.
-----------------------------------
egm.go(100); % To run 100 rounds.
-----------------------------------

### Post processing and analysis.

Print the information of the best vertex after the latest round.
Print the information of several best vertices after a certain round.
-----------------------------------
egm.best_vertex;
egm.best_vertices(num_th_round, num_best_vertices);
-----------------------------------


Visualize the learning curve of cost function. 
-----------------------------------
egm.learningCurve;
-----------------------------------


Visualize the control landscape during or after optimization. 
-----------------------------------
% Visualize the studied vertices in the former 5th round 
% with proximity map generated by vertices in all rounds as background.
egm.controlLandscape(5);
% Visualize and save the final control landscape with all the studied vertices.    
egm.controlLandscape;
-----------------------------------


Print and save the current figure.
-----------------------------------
egm.printFigure('Name_of_Figure');
-----------------------------------

### EGM parameters

EGM parameters are related to exploit and exploration steps.
For more details(like parameters about the problem), see *default_parameters.m*.
-----------------------------------
% Gradient_simplex parameters
simplexMirrorStep = 1;
simplexContractStep = 0.5;
simplexExpandStep = 2;
simplexShrinkStep = 1/2;
simplexParam = ...
[simplexMirrorStep simplexContractStep simplexExpandStep simplexShrinkStep];
parameters.simplexParam = simplexParam; 
parameters.simplexSize = parameters.inputDimen + 1; % The simplex size is related to the problem, see *default_parameters.m*.
parameters.gradient_Nstep = 1;   
    
% Exploration_sample parameters                         
parameters.sampleSetSize = 1e3;
parameters.punishCost = 10;
parameters.exploration_Nstep = 1;  
-----------------------------------

### Save/Load

To !!!avoid being overwritten!!!, it is better to save and load 
with a given name of a run.
If not given, the EGM object is saved as 'EGM'.
For more details, see CheatSheet.m.
-----------------------------------
egm.save_results;
egm.load_obj('Name_of_Run');
-----------------------------------

## Version

Version 0.1.2.4

## Author

Yiqing Li

## Acknowledgments

* The author thanks Guy Y. Cornejo Maceda for help on code.
* The author also thanks Bernd R. Noack and Zhigang Yang for guidance.


